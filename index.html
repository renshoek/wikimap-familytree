<!DOCTYPE HTML>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta charset="UTF-8">
  <meta name="description" content="Family Tree Visualizer using Wikidata.">
  <title>Family Tree Visualizer</title>

  <script data-skip-dnt="true" async defer src="https://sa.luk.ke/latest.js"></script>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" type="text/css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/shepherd/1.7.0/css/shepherd-theme-arrows.css" type="text/css" />
  <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css" type="text/css" />

  <link rel="stylesheet" href="./css/style.css" type="text/css"/>
  <link rel="stylesheet" href="./css/bar.css" type="text/css"/>
  <link rel="stylesheet" href="./css/buttongroup.css" type="text/css"/>
  <link rel="stylesheet" href="./css/shepherd-custom.css" type="text/css"/>
  <link rel="stylesheet" href="./css/commafield.css" type="text/css"/>
  <link rel="stylesheet" href="./css/welcome.css" type="text/css"/>
  <link rel="stylesheet" href="./css/modals.css" type="text/css"/>
  <link rel="stylesheet" href="./css/progress.css" type="text/css"/>
  <style>#people-mode-container { display: none !important; }</style>
</head>

<body>
  <div id="formbox" class="transparent-blur">
    <div id="input" class="commafield" data-placeholder="Enter a famous person (e.g. Queen Victoria)..."> </div>
    <button id="submit" type="button" title="Search">Go</button>
    <button id="random" type=button title="Random Person"><i class="icon ion-shuffle"></i></button>
    <button id="clear" type="button" title="Clear the tree" style="display: none;"><i class="icon ion-trash-a"></i></button>
  </div>

  <div id="loading" class="loading-hidden"><i class="icon ion-load-c"></i></div>

  <div id="container" class="fullscreen">
    <div id="info" class="transparent-blur">
      <h1 style="font-size: 2.2em; margin-bottom: 10px;">Interactive Family Tree</h1>
      <p style="font-size: 1.1em; color: #444; margin-bottom: 25px;">
        Visualize ancestry and genealogy using real-time data from Wikidata.
      </p>
      
      <div class="controls-guide" style="text-align: left; background: rgba(255,255,255,0.7); padding: 15px 20px; border-radius: 8px; border: 1px solid #ddd; box-shadow: 0 2px 5px rgba(0,0,0,0.05);">
        
        <div style="margin-bottom: 20px;">
            <h4 style="margin: 0 0 10px 0; text-transform: uppercase; font-size: 0.85em; color: #666; letter-spacing: 1px;">How to Navigate</h4>
            <ul style="margin: 0; padding-left: 0; list-style: none;">
              <li style="margin-bottom: 8px; display: flex; align-items: center;">
                <span style="background: rgba(255, 255, 255, 0.2); border: 1px solid #ccc; border-radius: 3px; width: 24px; height: 24px; display: inline-flex; align-items: center; justify-content: center; margin-right: 10px; font-size: 12px;">‚ñ≤</span>
                <span><strong>Ancestors:</strong> Click the arrow above a person to load parents.</span>
              </li>
              <li style="margin-bottom: 8px; display: flex; align-items: center;">
                <span style="background: #fff; border: 1px solid #FFD700; border-radius: 3px; width: 24px; height: 24px; display: inline-flex; align-items: center; justify-content: center; margin-right: 10px; font-size: 14px;">üíç</span>
                <span><strong>Spouses:</strong> Click the ring to load partners.</span>
              </li>
              <li style="margin-bottom: 8px; display: flex; align-items: center;">
                <span style="background: #fff; border: 1px solid #444; border-radius: 50%; width: 24px; height: 24px; display: inline-flex; align-items: center; justify-content: center; margin-right: 10px; font-weight: bold; font-size: 12px;">3</span>
                <span><strong>Descendants:</strong> Click the numbered circle between partners.</span>
              </li>
              <li style="display: flex; align-items: center;">
                <span style="background: #fff; border: 1px solid #888; border-radius: 3px; width: 24px; height: 24px; display: inline-flex; align-items: center; justify-content: center; margin-right: 10px; font-size: 14px;">‚áÑ</span>
                <span><strong>Siblings:</strong> Toggle siblings by hovering over a node.</span>
              </li>
            </ul>
        </div>

        <div>
            <h4 style="margin: 0 0 10px 0; text-transform: uppercase; font-size: 0.85em; color: #666; letter-spacing: 1px;">Action Toolbar (Bottom Right)</h4>
            <ul style="margin: 0; padding-left: 0; list-style: none;">
                <li style="margin-bottom: 5px;"><i class="icon ion-information-circled" style="width: 20px; text-align:center;"></i> <strong>Info:</strong> Select a person to view bio & details.</li>
                <li style="margin-bottom: 5px;"><i class="icon ion-pin" style="width: 20px; text-align:center;"></i> <strong>Pin:</strong> Lock a node in position.</li>
                <li><i class="icon ion-trash-b" style="width: 20px; text-align:center;"></i> <strong>Delete:</strong> Remove selected node(s).</li>
            </ul>
        </div>

      </div>

      <div style="display: flex; align-items: center; justify-content: center; gap: 10px; margin-top: 30px; margin-bottom: 10px;">
        <h3 style="border-bottom: none; margin: 0; font-weight: normal; color: #555;">Try a famous figure:</h3>
        <button id="refresh-suggestions" style="background: none; border: none; cursor: pointer; color: #555;" title="Refresh list">
          <i class="icon ion-refresh"></i>
        </button>
      </div>
      <div id="suggestions" class="suggestion-grid"></div>
    </div>
  </div>

  <div id="node-info-card" style="display: none;"></div>

  <button id="debug-trigger" class="debug-btn" title="Debug Physics"><i class="icon ion-bug"></i></button>

  <div id="debug-panel" class="debug-panel" style="display: none;">
    <div class="debug-header">
        <span>Physics Debugger</span>
        <button id="debug-close" style="background:none; border:none; color:white; font-weight:bold; cursor:pointer;">X</button>
    </div>
    
    <div class="debug-section">
        <label>Gravitational Constant (Repulsion)</label>
        <input type="range" id="opt-gravity" min="-10000" max="-100" step="100">
        <span id="val-gravity"></span>
    </div>

    <div class="debug-section">
        <label>Central Gravity</label>
        <input type="range" id="opt-central" min="0" max="1" step="0.01">
        <span id="val-central"></span>
    </div>
    
    <div class="debug-section">
        <label>Spring Stiffness (Flexibility)</label>
        <input type="range" id="opt-springk" min="0.001" max="0.1" step="0.001">
        <span id="val-springk"></span>
    </div>

    <div class="debug-section">
        <label>Damping</label>
        <input type="range" id="opt-damping" min="0" max="1" step="0.01">
        <span id="val-damping"></span>
    </div>

    <div style="margin-top: 15px; text-align: center;">
        <button id="debug-reset" style="background: #d9534f; border:none; color: white; padding: 5px 15px; border-radius: 4px; cursor: pointer;">Reset to System Defaults</button>
    </div>
  </div>

  <div class="button-container">
    <button id="btn-theme" title="Toggle Dark/Light Mode"><i class="icon ion-contrast"></i></button>
    <button id="btn-physics" title="Toggle Physics (On/Off)"><i class="icon ion-ios-pause"></i></button>
    <button id="btn-settings" title="Settings"><i class="icon ion-gear-a"></i></button>
  </div>

  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"> </script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.5.12/clipboard.min.js"> </script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.3.3/js/tether.min.js"> </script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/shepherd/1.7.0/js/shepherd.min.js"> </script>

  <script type="text/javascript" src="./js/wikidata_service.js"></script>
  <script type="text/javascript" src="./js/layout.js"></script>
  
  <script type="text/javascript" src="./js/tree_utils.js"></script>
  <script type="text/javascript" src="./js/tree_elements.js"></script>
  <script type="text/javascript" src="./js/tree_controller.js"></script>
  
  <script type="text/javascript" src="./js/helpers.js"> </script>
  <script type="text/javascript" src="./js/help.js"> </script>
  <script type="text/javascript" src="./js/main.js"> </script>
  <script type="text/javascript" src="./js/network_serialize.js"> </script>
  <script type="text/javascript" src="./js/bindings.js"> </script>
  <script type="text/javascript" src="./js/commafield.js"> </script>
  <script type="text/javascript" src="./js/loadsaved.js"> </script>
  <script type="text/javascript" src="./js/modals.js"> </script>
  <script type="text/javascript" src="./js/progress.js"> </script>

  <script>
    window.onload = function () {
      bind();
      loadSaved();
    };
  </script>
</body>
</html>
